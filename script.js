// ============================================
// Translations Object
// ============================================

const translations = {
    en: {
        hero: {
            title: "Your Smart WhatsApp Assistant for Business",
            subtitle: "Turns your WhatsApp into a 24/7 premium front desk â€” instantly answering customers, booking services, and collecting M-Pesa payments without extra staff.",
            cta: "Get Started",
            whatsappButton: "Message us on WhatsApp",
            supporting: "Built for Kenyan businesses ðŸ‡°ðŸ‡ª"
        },
        why: {
            title: "Why Choose Biashara-Assistant?",
            card1: {
                title: "Save Hours Every Day",
                body: "Stop manually replying to every message. Biashara-Assistant handles customer inquiries 24/7, so you can focus on growing your business."
            },
            card2: {
                title: "Never Miss a Customer",
                body: "Instant replies mean customers get answers immediately, even when you're busy. Turn every inquiry into a sale."
            },
            card3: {
                title: "Get Paid Faster",
                body: "Accept M-Pesa payments directly through WhatsApp. No need to share numbers or wait for confirmationsâ€”payments happen in the chat."
            }
        },
        how: {
            title: "How It Works",
            step1: {
                title: "Sign Up in Minutes",
                body: "Fill out a simple form with your business details. No technical skills needed."
            },
            step2: {
                title: "Connect Your WhatsApp",
                body: "Link your business WhatsApp number. We'll guide you through the simple setup process."
            },
            step3: {
                title: "Customize Your Bot",
                body: "Set your business hours, services, prices, and payment options. Make it yours."
            },
            step4: {
                title: "Start Receiving Customers",
                body: "Your bot is live! Customers can now book, ask questions, and payâ€”all automatically."
            }
        },
        features: {
            title: "Everything You Need to Run Your Business",
            card1: {
                badge: "24/7 Available",
                heading: "Smart Auto-Reply",
                body: "Automatically answer common questions about your services, hours, and location."
            },
            card2: {
                badge: "Instant Notifications",
                heading: "Easy Bookings",
                body: "Customers can book appointments or services directly through WhatsApp. You get instant notifications."
            },
            card3: {
                badge: "Auto-Saved",
                heading: "Capture Every Lead",
                body: "Automatically collect customer names, phone numbers, and inquiry details. Never lose a potential sale."
            },
            card4: {
                badge: "Secure",
                heading: "M-Pesa Payments",
                body: "Accept payments directly in the chat. Customers pay via M-Pesa without leaving WhatsApp."
            },
            card5: {
                badge: "Customizable",
                heading: "Smart Scheduling",
                body: "Set your business hours. The bot automatically tells customers when you're available."
            },
            card6: {
                badge: "Insights",
                heading: "Track Your Growth",
                body: "See how many customers you're reaching, bookings made, and payments receivedâ€”all in one place."
            }
        },
        who: {
            title: "Perfect for Kenyan Small Businesses",
            salon: {
                heading: "Salons & Barbershops",
                body: "Fast bookings and walk-ins. Show services & prices, book appointments, send reminders, and accept deposits automatically.",
                feature1: "Service menu & prices",
                feature2: "Instant bookings",
                feature3: "Walk-in support",
                feature4: "Automated reminders"
            },
            clinic: {
                heading: "Clinics",
                body: "Build trust with accurate appointments. Show services, doctor availability, handle insurance inquiries, and escalate to staff when needed.",
                feature1: "Doctor availability",
                feature2: "Appointment booking",
                feature3: "Insurance info",
                feature4: "Staff escalation"
            },
            realestate: {
                heading: "Real Estate Agents",
                body: "Qualify leads automatically. Capture property inquiries, budget, location preferences, schedule viewings, and hand off to agents.",
                feature1: "Lead qualification",
                feature2: "Budget capture",
                feature3: "Viewing scheduling",
                feature4: "Agent handoff"
            },
            school: {
                heading: "Schools",
                body: "Reduce admin workload. Answer admissions questions, share fees, requirements, important dates, and escalate complex inquiries.",
                feature1: "Admissions info",
                feature2: "Fees & requirements",
                feature3: "Important dates",
                feature4: "Structured inquiries"
            },
            hotel: {
                heading: "Hotels",
                body: "Convert inquiries to bookings. Show room types & rates, check availability, handle reservation requests, share amenities and directions.",
                feature1: "Room types & rates",
                feature2: "Availability inquiry",
                feature3: "Reservation requests",
                feature4: "Amenities & directions"
            },
            church: {
                heading: "Churches",
                body: "Information and engagement. Share service times, events, departments, giving information, and volunteer signup opportunities.",
                feature1: "Service times",
                feature2: "Events & departments",
                feature3: "Giving information",
                feature4: "Volunteer signup"
            }
        },
        pricing: {
            title: "Simple, Transparent Pricing",
            planName: "Starter Plan",
            dealBadge: "Limited time deal: get Biashara-Assistant free",
            subtext: "Perfect for small businesses getting started",
            feature1: "âœ“ Unlimited customer messages",
            feature2: "âœ“ Auto-reply to inquiries",
            feature3: "âœ“ Booking system",
            feature4: "âœ“ Lead capture",
            feature5: "âœ“ M-Pesa payment integration",
            feature6: "âœ“ Business hours management",
            feature7: "âœ“ Basic analytics",
            feature8: "âœ“ Email support",
            ctaButton: "Start Free Trial",
            trust1: "No credit card required",
            trust2: "Cancel anytime",
            trust3: "7-day free trial"
        },
        form: {
            title: "Get Started in 5 Minutes",
            subtitle: "Fill out the form below and we'll set up your Biashara-Assistant right away.",
            businessName: {
                label: "Business Name *",
                placeholder: "e.g., Mama Sarah's Salon"
            },
            yourName: {
                label: "Your Name *",
                placeholder: "e.g., Sarah Wanjiku"
            },
            phone: {
                label: "WhatsApp Business Number *",
                placeholder: "e.g., 0712 345 678",
                helper: "The number customers will message"
            },
            businessType: {
                label: "What type of business? *",
                default: "Select your business type",
                salon: "Salon/Barbershop",
                clinic: "Clinic",
                realestate: "Real Estate",
                school: "School",
                hotel: "Hotel",
                church: "Church",
                other: "Other"
            },
            email: {
                label: "Email Address *",
                placeholder: "your@email.com",
                helper: "We'll send setup instructions here"
            },
            additionalInfo: {
                label: "Tell us about your business (optional)",
                placeholder: "Any specific requirements or questions?"
            },
            submit: "Start My Free Trial",
            trustMessage: "ðŸ”’ Your information is secure. We'll never share your data.",
            legalText: "By submitting, you agree to our",
            termsLink: "Terms of Service",
            and: "and",
            privacyLink: "Privacy Policy"
        },
        cta: {
            title: "Ready to Grow Your Biashara?",
            subtitle: "Join hundreds of Kenyan businesses using Biashara-Assistant to serve customers better.",
            button: "Start Free Trial Now"
        },
        chatDemoTabs: {
            salon: "Salon",
            clinic: "Clinic",
            realestate: "Real Estate",
            school: "School",
            hotel: "Hotel",
            church: "Church"
        },
        chatDemo: {
            salon: {
                contactName: "Mama Sarah's Salon",
                status: "online",
                m1: "Hi, are you available tomorrow?",
                m2: "Yesâ€”2pm, 3pm, or 4pm. Which works for you?",
                m3: "3pm.",
                m4: "Great. Haircut is KES 500. Pay via M-Pesa Buy Goods:",
                pay: "Till Number: 123456",
                m5: "Booked âœ…",
                details: "ðŸ“… Tomorrow 3:00pm\nðŸ’‡ Haircut\nðŸ’° KES 500",
                m6: "Reminder: today at 3pm. See you soon."
            },
            clinic: {
                contactName: "GreenCare Clinic",
                status: "online",
                m1: "Hi, I need to see a doctor.",
                m2: "Sureâ€”what service do you need? (Consultation / Lab / Dental)",
                m3: "Consultation.",
                m4: "Available times: 10:30am or 2:00pm. Which do you prefer?",
                m5: "2:00pm.",
                m6: "Please share your full name + NHIF/insurance (if any). A staff member will confirm shortly."
            },
            realestate: {
                contactName: "Nairobi Homes",
                status: "online",
                m1: "I'm looking for a 2 bedroom.",
                m2: "Greatâ€”what location do you prefer?",
                m3: "Kilimani.",
                m4: "Budget range?",
                m5: "Up to 60k.",
                m6: "When can you view? (Sat 11am / Sat 2pm / Sun 1pm)",
                m7: "Thanksâ€”an agent will contact you to confirm."
            },
            school: {
                contactName: "Bright Future School",
                status: "online",
                m1: "Hi, I want to join Form 1.",
                m2: "Greatâ€”what term are you applying for?",
                m3: "Term 2.",
                m4: "Requirements: birth cert, KCPE result slip, 2 passport photos.",
                m5: "Fees & key dates are available. Want the full fee structure?",
                m6: "Share the student's name + KCPE marks and we'll guide the next step."
            },
            hotel: {
                contactName: "Coastline Hotel",
                status: "online",
                m1: "Do you have rooms this weekend?",
                m2: "Sureâ€”what dates and how many guests?",
                m3: "Friâ€“Sun, 2 adults.",
                m4: "Options: Standard / Deluxe. Which do you prefer?",
                m5: "Deluxe.",
                m6: "Thanksâ€”share your name + phone. Staff will confirm availability and send payment details."
            },
            church: {
                contactName: "NewLife Church",
                status: "online",
                m1: "What time is service?",
                m2: "Sunday services: 8am & 10:30am. Midweek: Wed 6pm.",
                m3: "Any youth events?",
                m4: "Youth fellowship: Sat 3pm. Want the weekly schedule?",
                m5: "Yes.",
                m6: "Here it is. Would you like to join a department or volunteer?"
            }
        },
        footer: {
            brand: "Biashara-Assistant",
            tagline: "Your WhatsApp business assistant",
            product: "Product",
            company: "Company",
            legal: "Legal",
            features: "Features",
            howItWorks: "How It Works",
            pricing: "Pricing",
            faq: "FAQ",
            aboutUs: "About Us",
            contact: "Contact",
            blog: "Blog",
            careers: "Careers",
            termsOfService: "Terms of Service",
            privacyPolicy: "Privacy Policy",
            refundPolicy: "Refund Policy",
            copyright: "Â© 2026 Biashara-Assistant. All rights reserved.",
            madeInKenya: "Made with â¤ï¸ in Kenya",
            terms: "Terms",
            privacy: "Privacy"
        }
    },
    sw: {
        hero: {
            title: "Msaidizi Wako wa WhatsApp wa Kibiashara",
            subtitle: "Inageuza WhatsApp yako kuwa ofisi ya mbele ya hali ya juu masaa 24 â€” kujibu wateja mara moja, kujireservi huduma, na kukusanya malipo ya M-Pesa bila wafanyakazi wa ziada.",
            cta: "Anza Sasa",
            whatsappButton: "Tutumie ujumbe kwa WhatsApp",
            supporting: "Imeundwa kwa biashara za Kenya ðŸ‡°ðŸ‡ª"
        },
        why: {
            title: "Kwa Nini Uchague Biashara-Assistant?",
            card1: {
                title: "Okoa Masaa Kila Siku",
                body: "Acha kujibu kila ujumbe mwenyewe. Biashara-Assistant hushughulikia maswali ya wateja masaa 24, ili uweze kuzingatia kukuza biashara yako."
            },
            card2: {
                title: "Usikose Mteja Yeyote",
                body: "Majibu ya haraka yanamaanisha wateja hupata majibu mara moja, hata unapokuwa bize. Badilisha kila swali kuwa mauzo."
            },
            card3: {
                title: "Lipwa Haraka Zaidi",
                body: "Kubali malipo ya M-Pesa moja kwa moja kupitia WhatsApp. Hakuna haja ya kushiriki nambari au kusubiri uthibitishoâ€”malipo hufanyika kwenye mazungumzo."
            }
        },
        how: {
            title: "Inavyofanya Kazi",
            step1: {
                title: "Jisajili kwa Dakika Chache",
                body: "Jaza fomu rahisi na maelezo ya biashara yako. Hakuna ujuzi wa kiufundi unahitajika."
            },
            step2: {
                title: "Unganisha WhatsApp Yako",
                body: "Unganisha nambari yako ya WhatsApp ya biashara. Tutakuongoza kupitia mchakato rahisi wa kusanidi."
            },
            step3: {
                title: "Sanidi Boti Yako",
                body: "Weka masaa ya biashara yako, huduma, bei, na chaguzi za malipo. Ifanye iwe yako."
            },
            step4: {
                title: "Anza Kupokea Wateja",
                body: "Boti yako iko hai! Wateja sasa wanaweza kujireservi, kuuliza maswali, na kulipaâ€”yote kiotomatiki."
            }
        },
        features: {
            title: "Kila Kitu Unachohitaji Kuendesha Biashara Yako",
            card1: {
                badge: "Inapatikana Masaa 24",
                heading: "Jibu la Kiotomatiki la Kipaji",
                body: "Jibu maswali ya kawaida kuhusu huduma zako, masaa, na eneo kiotomatiki."
            },
            card2: {
                badge: "Arifa za Haraka",
                heading: "Mareservi Rahisi",
                body: "Wateja wanaweza kujireservi au huduma moja kwa moja kupitia WhatsApp. Unapata arifa za haraka."
            },
            card3: {
                badge: "Imehifadhiwa Kiotomatiki",
                heading: "Kamata Kila Mteja",
                body: "Kusanya majina ya wateja, nambari za simu, na maelezo ya maswali kiotomatiki. Usikose uuzaji wowote unaowezekana."
            },
            card4: {
                badge: "Salama",
                heading: "Malipo ya M-Pesa",
                body: "Kubali malipo moja kwa moja kwenye mazungumzo. Wateja hulipa kupitia M-Pesa bila kuacha WhatsApp."
            },
            card5: {
                badge: "Inaweza Kusanishwa",
                heading: "Ratiba ya Kipaji",
                body: "Weka masaa ya biashara yako. Boti inawaambia wateja kiotomatiki wakati unapatikana."
            },
            card6: {
                badge: "Ufahamu",
                heading: "Fuata Ukuaji Wako",
                body: "Ona wateja wangapi unawafikia, mareservi yaliyofanywa, na malipo yaliyopokelewaâ€”yote katika sehemu moja."
            }
        },
        who: {
            title: "Inafaa Kwa Biashara Ndogo za Kenya",
            salon: {
                heading: "Salon na Vibarberi",
                body: "Mareservi ya haraka na wateja wa kuja moja kwa moja. Onyesha huduma na bei, jireservi miadi, tuma ukumbusho, na kubali malipo ya awali kiotomatiki.",
                feature1: "Orodha ya huduma na bei",
                feature2: "Mareservi ya haraka",
                feature3: "Msaada wa wateja wa kuja moja kwa moja",
                feature4: "Ukumbusho wa kiotomatiki"
            },
            clinic: {
                heading: "Kliniki",
                body: "Jenga uaminifu kwa miadi sahihi. Onyesha huduma, upatikanaji wa daktari, shughulikia maswali ya bima, na ongeza kwa wafanyakazi inapohitajika.",
                feature1: "Upatikanaji wa daktari",
                feature2: "Kujireservi miadi",
                feature3: "Taarifa za bima",
                feature4: "Kuongeza kwa wafanyakazi"
            },
            realestate: {
                heading: "Wakala wa Mali za Isimu",
                body: "Thibitisha wateja wanaowezekana kiotomatiki. Kamata maswali ya mali, bajeti, mapendeleo ya eneo, ratibu maonyesho, na wasilisha kwa wakala.",
                feature1: "Uthibitishaji wa wateja wanaowezekana",
                feature2: "Kukamata bajeti",
                feature3: "Kuratibu maonyesho",
                feature4: "Kuwasilisha kwa wakala"
            },
            school: {
                heading: "Shule",
                body: "Punguza mzigo wa utawala. Jibu maswali ya uandikishaji, shiriki ada, mahitaji, tarehe muhimu, na ongeza maswali magumu.",
                feature1: "Taarifa za uandikishaji",
                feature2: "Ada na mahitaji",
                feature3: "Tarehe muhimu",
                feature4: "Maswali yaliyopangwa"
            },
            hotel: {
                heading: "Hoteli",
                body: "Badilisha maswali kuwa mareservi. Onyesha aina za vyumba na bei, angalia upatikanaji, shughulikia maombi ya mareservi, shiriki vifaa na maelekezo.",
                feature1: "Aina za vyumba na bei",
                feature2: "Swali la upatikanaji",
                feature3: "Maombi ya mareservi",
                feature4: "Vifaa na maelekezo"
            },
            church: {
                heading: "Makanisa",
                body: "Taarifa na ushiriki. Shiriki nyakati za ibada, matukio, idara, taarifa za kutoa, na fursa za kujisajili kama mtu wa kujitolea.",
                feature1: "Nyakati za ibada",
                feature2: "Matukio na idara",
                feature3: "Taarifa za kutoa",
                feature4: "Kujisajili kama mtu wa kujitolea"
            }
        },
        pricing: {
            title: "Bei Rahisi na Wazi",
            planName: "Mpango wa Kuanza",
            dealBadge: "Pesa maalum ya muda: pata Biashara-Assistant bure",
            subtext: "Inafaa kwa biashara ndogo zinazoanza",
            feature1: "âœ“ Ujumbe usio na kikomo kutoka kwa wateja",
            feature2: "âœ“ Jibu la kiotomatiki kwa maswali",
            feature3: "âœ“ Mfumo wa mareservi",
            feature4: "âœ“ Kukamata wateja wanaowezekana",
            feature5: "âœ“ Ujumuishaji wa malipo ya M-Pesa",
            feature6: "âœ“ Usimamizi wa masaa ya biashara",
            feature7: "âœ“ Uchambuzi wa msingi",
            feature8: "âœ“ Msaada wa barua pepe",
            ctaButton: "Anza Jaribio Bure",
            trust1: "Hakuna kadi ya mkopo inahitajika",
            trust2: "Ghairi wakati wowote",
            trust3: "Jaribio la siku 7 bure"
        },
        form: {
            title: "Anza kwa Dakika 5",
            subtitle: "Jaza fomu hapa chini na tutasanidi Biashara-Assistant yako mara moja.",
            businessName: {
                label: "Jina la Biashara *",
                placeholder: "mf., Salon ya Mama Sarah"
            },
            yourName: {
                label: "Jina Lako *",
                placeholder: "mf., Sarah Wanjiku"
            },
            phone: {
                label: "Nambari ya WhatsApp ya Biashara *",
                placeholder: "mf., 0712 345 678",
                helper: "Nambari ambayo wateja watatumia"
            },
            businessType: {
                label: "Ni aina gani ya biashara? *",
                default: "Chagua aina ya biashara yako",
                salon: "Salon/Kinyozi",
                clinic: "Kliniki",
                realestate: "Mali za Isimu",
                school: "Shule",
                hotel: "Hoteli",
                church: "Kanisa",
                other: "Nyingine"
            },
            email: {
                label: "Anwani ya Barua Pepe *",
                placeholder: "barua@pepe.com",
                helper: "Tutatumia hii kutuma maelekezo ya kusanidi"
            },
            additionalInfo: {
                label: "Tuambie kuhusu biashara yako (si lazima)",
                placeholder: "Mahitaji yoyote maalum au maswali?"
            },
            submit: "Anza Jaribio Bure",
            trustMessage: "ðŸ”’ Taarifa zako ziko salama. Hatutawahi kushiriki data yako.",
            legalText: "Kwa kuwasilisha, unakubali",
            termsLink: "Sheria za Huduma",
            and: "na",
            privacyLink: "Sera ya Faragha"
        },
        cta: {
            title: "Tayari Kukuza Biashara Yako?",
            subtitle: "Jiunge na mamia ya biashara za Kenya zinazotumia Biashara-Assistant kuwahudumia wateja vyema zaidi.",
            button: "Anza Jaribio Bure Sasa"
        },
        chatDemoTabs: {
            salon: "Salon",
            clinic: "Kliniki",
            realestate: "Mali",
            school: "Shule",
            hotel: "Hoteli",
            church: "Kanisa"
        },
        chatDemo: {
            salon: {
                contactName: "Salon ya Mama Sarah",
                status: "huko mtandaoni",
                m1: "Hujambo, mna nafasi kesho?",
                m2: "Ndioâ€”saa 2, 3, au 4. Ipi inakufaa?",
                m3: "Saa 3.",
                m4: "Sawa. Kunyoa ni KES 500. Lipa kwa M-Pesa Buy Goods:",
                pay: "Nambari ya Till: 123456",
                m5: "Imethibitishwa âœ…",
                details: "ðŸ“… Kesho saa 3:00\nðŸ’‡ Kunyoa\nðŸ’° KES 500",
                m6: "Ukumbusho: leo saa 3. Tutaonana."
            },
            clinic: {
                contactName: "GreenCare Kliniki",
                status: "huko mtandaoni",
                m1: "Hujambo, nahitaji kumuona daktari.",
                m2: "Sawaâ€”unahitaji huduma gani? (Ushauri / Maabara / Meno)",
                m3: "Ushauri.",
                m4: "Nafasi: 10:30 au 2:00. Unapendelea ipi?",
                m5: "2:00.",
                m6: "Tafadhali tuma jina kamili + NHIF/bima (kama ipo). Mfanyakazi atathibitisha hivi karibuni."
            },
            realestate: {
                contactName: "Nairobi Homes",
                status: "huko mtandaoni",
                m1: "Natafuta nyumba ya vyumba 2.",
                m2: "Sawaâ€”unapendelea eneo gani?",
                m3: "Kilimani.",
                m4: "Bajeti yako ni kiasi gani?",
                m5: "Hadi 60k.",
                m6: "Unaweza kuja kuona lini? (Jumamosi 11 / Jumamosi 2 / Jumapili 1)",
                m7: "Asanteâ€”wakala atakupigia kuthibitisha."
            },
            school: {
                contactName: "Bright Future School",
                status: "huko mtandaoni",
                m1: "Hujambo, nataka kujiunga Form 1.",
                m2: "Sawaâ€”unaomba muhula gani?",
                m3: "Muhula wa 2.",
                m4: "Mahitaji: cheti cha kuzaliwa, slip ya KCPE, picha 2 za pasipoti.",
                m5: "Ada na tarehe muhimu zipo. Unataka muundo kamili wa ada?",
                m6: "Tuma jina la mwanafunzi + alama za KCPE tuanze."
            },
            hotel: {
                contactName: "Coastline Hoteli",
                status: "huko mtandaoni",
                m1: "Mna vyumba wikendi hii?",
                m2: "Sawaâ€”tarehe gani na wageni wangapi?",
                m3: "Ijumaaâ€“Jumapili, watu wazima 2.",
                m4: "Chaguo: Standard / Deluxe. Unapendelea ipi?",
                m5: "Deluxe.",
                m6: "Asanteâ€”tuma jina + simu. Wafanyakazi watathibitisha upatikanaji na kutuma malipo."
            },
            church: {
                contactName: "NewLife Church",
                status: "huko mtandaoni",
                m1: "Ibada ni saa ngapi?",
                m2: "Ibada za Jumapili: 8am & 10:30am. Kati ya wiki: Jumatano 6pm.",
                m3: "Kuna youth events?",
                m4: "Youth fellowship: Jumamosi 3pm. Unataka ratiba ya wiki?",
                m5: "Ndiyo.",
                m6: "Hii hapa. Ungependa kujiunga idara au kujitolea?"
            }
        },
        footer: {
            brand: "Biashara-Assistant",
            tagline: "Msaidizi wako wa WhatsApp wa biashara",
            product: "Bidhaa",
            company: "Kampuni",
            legal: "Kisheria",
            features: "Vipengele",
            howItWorks: "Inavyofanya Kazi",
            pricing: "Bei",
            faq: "Maswali Yanayoulizwa Mara Kwa Mara",
            aboutUs: "Kuhusu Sisi",
            contact: "Wasiliana",
            blog: "Blogu",
            careers: "Kazi",
            termsOfService: "Sheria za Huduma",
            privacyPolicy: "Sera ya Faragha",
            refundPolicy: "Sera ya Rudi Pesa",
            copyright: "Â© 2026 Biashara-Assistant. Haki zote zimehifadhiwa.",
            madeInKenya: "Imetengenezwa kwa â¤ï¸ nchini Kenya",
            terms: "Sheria",
            privacy: "Faragha"
        }
    }
};

// ============================================
// Language Switcher
// ============================================

let currentLang = localStorage.getItem('language') || 'en';

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    document.documentElement.lang = lang;
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = getTranslation(key, lang);
        if (translation) {
            // Handle select options differently
            if (element.tagName === 'OPTION') {
                element.textContent = translation;
            } else {
                // Check if element has white-space: pre-line style (for multi-line text)
                const hasPreLine = element.style.whiteSpace === 'pre-line' || 
                                   window.getComputedStyle(element).whiteSpace === 'pre-line';
                if (hasPreLine) {
                    // For pre-line elements, preserve \n characters
                    element.textContent = translation;
                } else {
                    element.textContent = translation;
                }
            }
        }
    });
    
    // Update all elements with data-i18n-placeholder attribute
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        const translation = getTranslation(key, lang);
        if (translation) {
            element.placeholder = translation;
        }
    });
    
    // Update language toggle button text (show the language you can switch TO)
    const langText = document.getElementById('langText');
    if (langText) {
        langText.textContent = lang === 'en' ? 'SW' : 'EN';
    }
}

function getTranslation(key, lang) {
    const keys = key.split('.');
    let value = translations[lang];
    
    for (const k of keys) {
        if (value && typeof value === 'object' && k in value) {
            value = value[k];
        } else {
            return null;
        }
    }
    
    return typeof value === 'string' ? value : null;
}

// ============================================
// Smooth Scrolling for Anchor Links
// ============================================

document.addEventListener('DOMContentLoaded', function() {
    // Initialize language
    setLanguage(currentLang);
    
    // Language toggle button
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
        langToggle.addEventListener('click', function() {
            const newLang = currentLang === 'en' ? 'sw' : 'en';
            setLanguage(newLang);
        });
    }
    // Handle smooth scrolling for anchor links
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    
    anchorLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            
            // Skip if it's just "#"
            if (href === '#' || href === '#!') {
                e.preventDefault();
                return;
            }
            
            const targetId = href.substring(1);
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
                e.preventDefault();
                
                // Calculate offset for fixed headers if needed
                const offset = 0;
                const targetPosition = targetElement.offsetTop - offset;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
    
    // ============================================
    // Form Handling (Frontend Only)
    // ============================================
    
    const signupForm = document.getElementById('signupForm');
    
    if (signupForm) {
        signupForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Basic validation
            if (!validateForm(data)) {
                return;
            }

            // Send details to WhatsApp
            const whatsappNumber = '16086081288'; // International format without +
            const messageLines = [
                'New Biashara-Assistant signup request:',
                `Business Name: ${data.businessName || ''}`,
                `Your Name: ${data.yourName || ''}`,
                `WhatsApp Business Number: ${data.phone || ''}`,
                `Business Type: ${data.businessType || ''}`,
                `Email: ${data.email || ''}`,
                '',
                `Additional Info: ${data.additionalInfo || 'N/A'}`
            ];
            const whatsappText = messageLines.join('\n');
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(whatsappText)}`;
            window.open(whatsappUrl, '_blank');
            
            // Show success message (since there's no backend)
            showFormSuccess();
            
            // Reset form
            this.reset();
        });
    }
    
    // ============================================
    // Form Validation
    // ============================================
    
    function validateForm(data) {
        let isValid = true;
        
        // Validate required fields
        const requiredFields = ['businessName', 'yourName', 'phone', 'businessType', 'email'];
        
        requiredFields.forEach(fieldName => {
            const field = document.querySelector(`[name="${fieldName}"]`);
            
            if (!data[fieldName] || data[fieldName].trim() === '') {
                isValid = false;
                showFieldError(field, 'This field is required');
            } else {
                clearFieldError(field);
            }
        });
        
        // Validate email format
        const emailField = document.querySelector('[name="email"]');
        if (data.email && !isValidEmail(data.email)) {
            isValid = false;
            showFieldError(emailField, 'Please enter a valid email address');
        }
        
        // Validate phone format (basic Kenyan phone validation)
        const phoneField = document.querySelector('[name="phone"]');
        if (data.phone && !isValidKenyanPhone(data.phone)) {
            isValid = false;
            showFieldError(phoneField, 'Please enter a valid Kenyan phone number');
        }
        
        return isValid;
    }
    
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
    
    function isValidKenyanPhone(phone) {
        // Remove spaces and common formatting
        const cleaned = phone.replace(/\s+/g, '').replace(/[-\+]/g, '');
        // Kenyan phone numbers: 07XXXXXXXX or 2547XXXXXXXX
        const phoneRegex = /^(07\d{8}|2547\d{8})$/;
        return phoneRegex.test(cleaned);
    }
    
    function showFieldError(field, message) {
        if (!field) return;
        
        // Remove existing error
        clearFieldError(field);
        
        // Add error class
        field.classList.add('error');
        
        // Create error message element
        const errorElement = document.createElement('span');
        errorElement.className = 'field-error';
        errorElement.textContent = message;
        errorElement.style.color = '#EF4444';
        errorElement.style.fontSize = '12px';
        errorElement.style.marginTop = '4px';
        errorElement.style.display = 'block';
        
        // Insert after field
        field.parentNode.appendChild(errorElement);
    }
    
    function clearFieldError(field) {
        if (!field) return;
        
        field.classList.remove('error');
        
        // Remove existing error message
        const existingError = field.parentNode.querySelector('.field-error');
        if (existingError) {
            existingError.remove();
        }
    }
    
    // ============================================
    // Show Form Success Message
    // ============================================
    
    function showFormSuccess() {
        const form = document.getElementById('signupForm');
        const successMessage = document.createElement('div');
        successMessage.className = 'form-success';
        const successTitle = currentLang === 'en' ? 'Thank you for signing up!' : 'Asante kwa kujisajili!';
        const successText = currentLang === 'en' 
            ? "We'll send setup instructions to your email shortly."
            : "Tutatumia maelekezo ya kusanidi kwenye barua pepe yako hivi karibuni.";
        successMessage.innerHTML = `
            <div style="
                background: #F0FDF4;
                border: 2px solid #10B981;
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 24px;
                text-align: center;
            ">
                <div style="
                    font-size: 48px;
                    margin-bottom: 12px;
                ">âœ“</div>
                <h3 style="
                    color: #10B981;
                    font-size: 20px;
                    margin-bottom: 8px;
                ">${successTitle}</h3>
                <p style="
                    color: #065F46;
                    font-size: 14px;
                ">${successText}</p>
            </div>
        `;
        
        // Insert at the top of the form
        form.insertBefore(successMessage, form.firstChild);
        
        // Scroll to success message
        successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Remove success message after 5 seconds
        setTimeout(() => {
            successMessage.remove();
        }, 5000);
    }
    
    // ============================================
    // Real-time Field Validation
    // ============================================
    
    const formFields = document.querySelectorAll('#signupForm input, #signupForm select, #signupForm textarea');
    
    formFields.forEach(field => {
        field.addEventListener('blur', function() {
            const fieldName = this.name;
            const fieldValue = this.value.trim();
            
            // Clear previous errors
            clearFieldError(this);
            
            // Validate on blur
            if (this.hasAttribute('required') && !fieldValue) {
                showFieldError(this, 'This field is required');
                return;
            }
            
            // Email validation
            if (fieldName === 'email' && fieldValue && !isValidEmail(fieldValue)) {
                showFieldError(this, 'Please enter a valid email address');
                return;
            }
            
            // Phone validation
            if (fieldName === 'phone' && fieldValue && !isValidKenyanPhone(fieldValue)) {
                showFieldError(this, 'Please enter a valid Kenyan phone number');
                return;
            }
        });
        
        // Clear error on input
        field.addEventListener('input', function() {
            if (this.classList.contains('error')) {
                clearFieldError(this);
            }
        });
    });
    
    // ============================================
    // Add CSS for error states
    // ============================================
    
    const style = document.createElement('style');
    style.textContent = `
        .form-group input.error,
        .form-group select.error,
        .form-group textarea.error {
            border-color: #EF4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }
    `;
    document.head.appendChild(style);
    
    // ============================================
    // Animated Chat Demo
    // ============================================

    const CHAT_INDUSTRIES = ['salon', 'clinic', 'realestate', 'school', 'hotel', 'church'];

    // Defines bubble structure per industry (keys live under translations.{lang}.chatDemo.<industry>.*)
    const CHAT_DEMO_STRUCTURE = {
        salon: [
            { dir: 'in', keys: ['m1'] },
            { dir: 'out', keys: ['m2'] },
            { dir: 'in', keys: ['m3'] },
            { dir: 'out', keys: ['m4', 'pay'], prelineKeys: ['pay'] },
            { dir: 'out', keys: ['m5', 'details'], prelineKeys: ['details'] },
            { dir: 'out', keys: ['m6'] },
        ],
        clinic: [
            { dir: 'in', keys: ['m1'] },
            { dir: 'out', keys: ['m2'] },
            { dir: 'in', keys: ['m3'] },
            { dir: 'out', keys: ['m4'] },
            { dir: 'in', keys: ['m5'] },
            { dir: 'out', keys: ['m6'] },
        ],
        realestate: [
            { dir: 'in', keys: ['m1'] },
            { dir: 'out', keys: ['m2'] },
            { dir: 'in', keys: ['m3'] },
            { dir: 'out', keys: ['m4'] },
            { dir: 'in', keys: ['m5'] },
            { dir: 'out', keys: ['m6'] },
            { dir: 'out', keys: ['m7'] },
        ],
        school: [
            { dir: 'in', keys: ['m1'] },
            { dir: 'out', keys: ['m2'] },
            { dir: 'in', keys: ['m3'] },
            { dir: 'out', keys: ['m4'] },
            { dir: 'out', keys: ['m5'] },
            { dir: 'out', keys: ['m6'] },
        ],
        hotel: [
            { dir: 'in', keys: ['m1'] },
            { dir: 'out', keys: ['m2'] },
            { dir: 'in', keys: ['m3'] },
            { dir: 'out', keys: ['m4'] },
            { dir: 'in', keys: ['m5'] },
            { dir: 'out', keys: ['m6'] },
        ],
        church: [
            { dir: 'in', keys: ['m1'] },
            { dir: 'out', keys: ['m2'] },
            { dir: 'in', keys: ['m3'] },
            { dir: 'out', keys: ['m4'] },
            { dir: 'in', keys: ['m5'] },
            { dir: 'out', keys: ['m6'] },
        ],
    };

    let currentChatIndustry = 'salon';
    let chatAutoRotateTimer = null;
    let userStoppedAutoRotate = false;
    let chatAnimationRunId = 0;

    function setActiveIndustryPill(industry) {
        document.querySelectorAll('.industry-pill').forEach(btn => {
            const isActive = btn.getAttribute('data-industry') === industry;
            btn.classList.toggle('active', isActive);
            btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
        });
    }

    function clearChatMessages(chatMessages, typingIndicator) {
        // Remove everything except typing indicator
        const nodesToRemove = [];
        chatMessages.childNodes.forEach(node => {
            if (node !== typingIndicator) nodesToRemove.push(node);
        });
        nodesToRemove.forEach(n => chatMessages.removeChild(n));
    }

    function renderChatDemo(industry) {
        if (!CHAT_INDUSTRIES.includes(industry)) return;

        const chatMessages = document.getElementById('chatMessages');
        const typingIndicator = document.getElementById('typingIndicator');
        const contactNameEl = document.getElementById('chatContactName');
        const contactStatusEl = document.getElementById('chatContactStatus');

        if (!chatMessages || !typingIndicator || !contactNameEl || !contactStatusEl) return;

        currentChatIndustry = industry;
        setActiveIndustryPill(industry);

        // Reset typing indicator
        typingIndicator.classList.remove('active');

        // Make sure typing indicator stays last
        if (typingIndicator.parentElement === chatMessages) {
            chatMessages.appendChild(typingIndicator);
        }

        clearChatMessages(chatMessages, typingIndicator);

        // Set contact header keys
        contactNameEl.setAttribute('data-i18n', `chatDemo.${industry}.contactName`);
        contactStatusEl.setAttribute('data-i18n', `chatDemo.${industry}.status`);

        const structure = CHAT_DEMO_STRUCTURE[industry] || [];
        structure.forEach((msg, idx) => {
            const messageEl = document.createElement('div');
            messageEl.className = `message ${msg.dir === 'out' ? 'message-outgoing' : 'message-incoming'}`;
            messageEl.setAttribute('data-message', String(idx + 1));

            const bubble = document.createElement('div');
            bubble.className = `message-bubble ${msg.dir === 'out' ? 'outgoing' : 'incoming'}`;

            const prelineSet = new Set(msg.prelineKeys || []);
            msg.keys.forEach((k, lineIdx) => {
                const p = document.createElement('p');
                p.setAttribute('data-i18n', `chatDemo.${industry}.${k}`);
                if (prelineSet.has(k)) {
                    p.classList.add('preline');
                    if (lineIdx > 0) p.style.marginTop = '8px';
                    if (k === 'pay') p.style.fontWeight = '600';
                } else if (lineIdx > 0) {
                    p.style.marginTop = '8px';
                }
                bubble.appendChild(p);
            });

            messageEl.appendChild(bubble);
            chatMessages.insertBefore(messageEl, typingIndicator);
        });

        // Translate freshly injected nodes
        setLanguage(currentLang);

        // Restart animation safely
        startChatAnimation();
    }

    function startChatAnimation() {
        chatAnimationRunId += 1;
        const runId = chatAnimationRunId;
        animateChatDemo(runId);
    }

    function animateChatDemo(runId) {
        const messages = document.querySelectorAll('#chatMessages .message[data-message]');
        const typingIndicator = document.getElementById('typingIndicator');
        const chatMessages = document.getElementById('chatMessages');

        if (!messages.length || !typingIndicator || !chatMessages) return;

        // Reset all messages to hidden
        messages.forEach(msg => {
            msg.style.opacity = '0';
            msg.style.transform = 'translateY(10px)';
            msg.style.display = 'none';
        });

        typingIndicator.classList.remove('active');

        // per-message timing (slightly more natural than fixed arrays)
        const baseDelayIn = 1100;
        const baseDelayOut = 1500;
        const baseTyping = 900;
        const endLoopPause = 2600;

        let currentMessage = 0;

        function isStillActive() {
            return runId === chatAnimationRunId;
        }

        function showNextMessage() {
            if (!isStillActive()) return;

            if (currentMessage >= messages.length) {
                setTimeout(() => {
                    if (!isStillActive()) return;
                    startChatAnimation();
                }, endLoopPause);
                return;
            }

            const message = messages[currentMessage];
            const isOutgoing = message.classList.contains('message-outgoing');

            const afterShowDelay = isOutgoing ? baseDelayOut : baseDelayIn;

            if (isOutgoing) {
                typingIndicator.classList.add('active');
                setTimeout(() => {
                    if (!isStillActive()) return;
                    typingIndicator.classList.remove('active');

                    message.style.display = 'flex';
                    setTimeout(() => {
                        if (!isStillActive()) return;
                        message.style.opacity = '1';
                        message.style.transform = 'translateY(0)';
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 50);

                    currentMessage += 1;
                    setTimeout(showNextMessage, afterShowDelay);
                }, baseTyping);
            } else {
                message.style.display = 'flex';
                setTimeout(() => {
                    if (!isStillActive()) return;
                    message.style.opacity = '1';
                    message.style.transform = 'translateY(0)';
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 50);

                currentMessage += 1;
                setTimeout(showNextMessage, afterShowDelay);
            }
        }

        setTimeout(showNextMessage, 700);
    }

    function stopAutoRotate() {
        if (chatAutoRotateTimer) {
            clearInterval(chatAutoRotateTimer);
            chatAutoRotateTimer = null;
        }
    }

    function startAutoRotate() {
        stopAutoRotate();
        if (userStoppedAutoRotate) return;

        chatAutoRotateTimer = setInterval(() => {
            if (userStoppedAutoRotate) return;
            const idx = CHAT_INDUSTRIES.indexOf(currentChatIndustry);
            const next = CHAT_INDUSTRIES[(idx + 1) % CHAT_INDUSTRIES.length];
            renderChatDemo(next);
        }, 12000);
    }

    // Hook up tab clicks
    document.querySelectorAll('.industry-pill').forEach(btn => {
        btn.addEventListener('click', () => {
            userStoppedAutoRotate = true;
            stopAutoRotate();
            const industry = btn.getAttribute('data-industry') || 'salon';
            renderChatDemo(industry);
        });
    });

    // Initial render + animation + auto-rotate
    renderChatDemo('salon');
    startAutoRotate();
});
